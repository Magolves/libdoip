<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>libdoip: doip::IConnectionContext Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">libdoip
   &#160;<span id="projectnumber">0.1.0</span>
   </div>
   <div id="projectbrief">DoIP (Diagnostics over Internet Protocol) ISO 13400 C++17 Library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('classdoip_1_1IConnectionContext.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="classdoip_1_1IConnectionContext-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">doip::IConnectionContext Class Reference<span class="mlabels"><span class="mlabel">abstract</span></span></div>  </div>
</div><!--header-->
<div class="contents">

<p>Interface between DoIPServerStateMachine and <a class="el" href="classdoip_1_1DoIPConnection.html">DoIPConnection</a>.  
 <a href="classdoip_1_1IConnectionContext.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="IConnectionContext_8h_source.html">IConnectionContext.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for doip::IConnectionContext:</div>
<div class="dyncontent">
<div class="center"><img src="classdoip_1_1IConnectionContext__inherit__graph.png" border="0" usemap="#adoip_1_1IConnectionContext_inherit__map" alt="Inheritance graph"/></div>
<map name="adoip_1_1IConnectionContext_inherit__map" id="adoip_1_1IConnectionContext_inherit__map">
<area shape="rect" title="Interface between DoIPServerStateMachine and DoIPConnection." alt="" coords="17,5,203,32"/>
<area shape="rect" href="classdoip_1_1DoIPDefaultConnection.html" title="Default implementation of IConnectionContext." alt="" coords="5,80,215,107"/>
<area shape="rect" href="classdoip_1_1DoIPConnection.html" title=" " alt="" coords="29,155,191,181"/>
</map>
<center><span class="legend">[<a target="top" href="graph_legend.html">legend</a>]</span></center></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:aa29f20762d7c87d9a27b61ce858bb151"><td class="memItemLeft" align="right" valign="top">virtual&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#aa29f20762d7c87d9a27b61ce858bb151">~IConnectionContext</a> ()=default</td></tr>
<tr class="separator:aa29f20762d7c87d9a27b61ce858bb151"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fb4ea5ca10fe941e7e0cf49e9c1d9dd"><td class="memItemLeft" align="right" valign="top">virtual ssize_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a6fb4ea5ca10fe941e7e0cf49e9c1d9dd">sendProtocolMessage</a> (const <a class="el" href="classdoip_1_1DoIPMessage.html">DoIPMessage</a> &amp;msg)=0</td></tr>
<tr class="memdesc:a6fb4ea5ca10fe941e7e0cf49e9c1d9dd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send a DoIP protocol message to the client.  <a href="classdoip_1_1IConnectionContext.html#a6fb4ea5ca10fe941e7e0cf49e9c1d9dd">More...</a><br /></td></tr>
<tr class="separator:a6fb4ea5ca10fe941e7e0cf49e9c1d9dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ade4e14ec9251183d70c7362e3c8ec349"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#ade4e14ec9251183d70c7362e3c8ec349">closeConnection</a> (<a class="el" href="namespacedoip.html#aa0c74d05995bcd88c8382796bafebd15">DoIPCloseReason</a> reason)=0</td></tr>
<tr class="memdesc:ade4e14ec9251183d70c7362e3c8ec349"><td class="mdescLeft">&#160;</td><td class="mdescRight">Close the TCP connection.  <a href="classdoip_1_1IConnectionContext.html#ade4e14ec9251183d70c7362e3c8ec349">More...</a><br /></td></tr>
<tr class="separator:ade4e14ec9251183d70c7362e3c8ec349"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7d6e8daed31b8bdfacdb6c4684633071"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a7d6e8daed31b8bdfacdb6c4684633071">isOpen</a> () const =0</td></tr>
<tr class="memdesc:a7d6e8daed31b8bdfacdb6c4684633071"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if the connection is currently open.  <a href="classdoip_1_1IConnectionContext.html#a7d6e8daed31b8bdfacdb6c4684633071">More...</a><br /></td></tr>
<tr class="separator:a7d6e8daed31b8bdfacdb6c4684633071"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1c1d741b613ecad64d28a877019682a2"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedoip.html#aa0c74d05995bcd88c8382796bafebd15">DoIPCloseReason</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a1c1d741b613ecad64d28a877019682a2">getCloseReason</a> () const =0</td></tr>
<tr class="memdesc:a1c1d741b613ecad64d28a877019682a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the reason why the connection was closed.  <a href="classdoip_1_1IConnectionContext.html#a1c1d741b613ecad64d28a877019682a2">More...</a><br /></td></tr>
<tr class="separator:a1c1d741b613ecad64d28a877019682a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac968c2daf59db7ab0c16460bada6c565"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedoip.html#a2e34faf5c14e3e2eb6669925065109f3">DoIPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#ac968c2daf59db7ab0c16460bada6c565">getServerAddress</a> () const =0</td></tr>
<tr class="memdesc:ac968c2daf59db7ab0c16460bada6c565"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the server's logical address.  <a href="classdoip_1_1IConnectionContext.html#ac968c2daf59db7ab0c16460bada6c565">More...</a><br /></td></tr>
<tr class="separator:ac968c2daf59db7ab0c16460bada6c565"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7344d7737d83e694d887d363d8fce30"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedoip.html#a2e34faf5c14e3e2eb6669925065109f3">DoIPAddress</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#ab7344d7737d83e694d887d363d8fce30">getClientAddress</a> () const =0</td></tr>
<tr class="memdesc:ab7344d7737d83e694d887d363d8fce30"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the currently active source address (routed client)  <a href="classdoip_1_1IConnectionContext.html#ab7344d7737d83e694d887d363d8fce30">More...</a><br /></td></tr>
<tr class="separator:ab7344d7737d83e694d887d363d8fce30"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5628ab1a792b4849e43148eeab329f13"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a5628ab1a792b4849e43148eeab329f13">setClientAddress</a> (const <a class="el" href="namespacedoip.html#a2e34faf5c14e3e2eb6669925065109f3">DoIPAddress</a> &amp;address)=0</td></tr>
<tr class="memdesc:a5628ab1a792b4849e43148eeab329f13"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set the active source address after routing activation.  <a href="classdoip_1_1IConnectionContext.html#a5628ab1a792b4849e43148eeab329f13">More...</a><br /></td></tr>
<tr class="separator:a5628ab1a792b4849e43148eeab329f13"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53fb1e96803eaef9e20424aa4a713667"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedoip.html#a36d50a403a0f7ea02d29c3ca55ccf575">DoIPDiagnosticAck</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a53fb1e96803eaef9e20424aa4a713667">notifyDiagnosticMessage</a> (const <a class="el" href="classdoip_1_1DoIPMessage.html">DoIPMessage</a> &amp;msg)=0</td></tr>
<tr class="memdesc:a53fb1e96803eaef9e20424aa4a713667"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an incoming diagnostic message (application callback)  <a href="classdoip_1_1IConnectionContext.html#a53fb1e96803eaef9e20424aa4a713667">More...</a><br /></td></tr>
<tr class="separator:a53fb1e96803eaef9e20424aa4a713667"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a240922118e46d9e58b19315f90cd71f3"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a240922118e46d9e58b19315f90cd71f3">notifyConnectionClosed</a> (<a class="el" href="namespacedoip.html#aa0c74d05995bcd88c8382796bafebd15">DoIPCloseReason</a> reason)=0</td></tr>
<tr class="memdesc:a240922118e46d9e58b19315f90cd71f3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify application that connection is closing.  <a href="classdoip_1_1IConnectionContext.html#a240922118e46d9e58b19315f90cd71f3">More...</a><br /></td></tr>
<tr class="separator:a240922118e46d9e58b19315f90cd71f3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f893190fe2b9ab5b15c58010b8a820c"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a2f893190fe2b9ab5b15c58010b8a820c">notifyDiagnosticAckSent</a> (<a class="el" href="namespacedoip.html#a36d50a403a0f7ea02d29c3ca55ccf575">DoIPDiagnosticAck</a> ack)=0</td></tr>
<tr class="memdesc:a2f893190fe2b9ab5b15c58010b8a820c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Notify application that diagnostic ACK/NACK was sent.  <a href="classdoip_1_1IConnectionContext.html#a2f893190fe2b9ab5b15c58010b8a820c">More...</a><br /></td></tr>
<tr class="separator:a2f893190fe2b9ab5b15c58010b8a820c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaddc0db259c5ea7b44dd448449d74208"><td class="memItemLeft" align="right" valign="top">virtual bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#aaddc0db259c5ea7b44dd448449d74208">hasDownstreamHandler</a> () const =0</td></tr>
<tr class="memdesc:aaddc0db259c5ea7b44dd448449d74208"><td class="mdescLeft">&#160;</td><td class="mdescRight">Check if downstream forwarding is available.  <a href="classdoip_1_1IConnectionContext.html#aaddc0db259c5ea7b44dd448449d74208">More...</a><br /></td></tr>
<tr class="separator:aaddc0db259c5ea7b44dd448449d74208"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cbc12ac44ae797098faccb893341f7d"><td class="memItemLeft" align="right" valign="top">virtual <a class="el" href="namespacedoip.html#a970f4c66d23bd2e149294ebbf34016c9">DoIPDownstreamResult</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#a1cbc12ac44ae797098faccb893341f7d">notifyDownstreamRequest</a> (const <a class="el" href="classdoip_1_1DoIPMessage.html">DoIPMessage</a> &amp;msg)=0</td></tr>
<tr class="memdesc:a1cbc12ac44ae797098faccb893341f7d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Forward a diagnostic message to downstream (subnet device)  <a href="classdoip_1_1IConnectionContext.html#a1cbc12ac44ae797098faccb893341f7d">More...</a><br /></td></tr>
<tr class="separator:a1cbc12ac44ae797098faccb893341f7d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab54b0cfc68440c9e9f120ef492f037dc"><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classdoip_1_1IConnectionContext.html#ab54b0cfc68440c9e9f120ef492f037dc">receiveDownstreamResponse</a> (const <a class="el" href="structdoip_1_1ByteArray.html">ByteArray</a> &amp;response, <a class="el" href="namespacedoip.html#a970f4c66d23bd2e149294ebbf34016c9">DoIPDownstreamResult</a> result)=0</td></tr>
<tr class="memdesc:ab54b0cfc68440c9e9f120ef492f037dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Receive a response from downstream device.  <a href="classdoip_1_1IConnectionContext.html#ab54b0cfc68440c9e9f120ef492f037dc">More...</a><br /></td></tr>
<tr class="separator:ab54b0cfc68440c9e9f120ef492f037dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Interface between DoIPServerStateMachine and <a class="el" href="classdoip_1_1DoIPConnection.html">DoIPConnection</a>. </p>
<p>This interface inverts the dependency between the state machine and connection. Instead of the state machine holding callbacks to the connection, the connection implements this interface and passes itself to the state machine.</p>
<p>Responsibilities:</p><ul>
<li>Bridge between protocol layer (state machine) and application layer (user callbacks)</li>
<li>Provide connection-level operations (send, close)</li>
<li>Provide configuration queries (addresses)</li>
<li>Handle downstream (subnet) communication flow </li>
</ul>

<p class="definition">Definition at line <a class="el" href="IConnectionContext_8h_source.html#l00027">27</a> of file <a class="el" href="IConnectionContext_8h_source.html">IConnectionContext.h</a>.</p>
</div><h2 class="groupheader">Constructor &amp; Destructor Documentation</h2>
<a id="aa29f20762d7c87d9a27b61ce858bb151"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa29f20762d7c87d9a27b61ce858bb151">&#9670;&nbsp;</a></span>~IConnectionContext()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual doip::IConnectionContext::~IConnectionContext </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">virtual</span><span class="mlabel">default</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

</div>
</div>
<h2 class="groupheader">Member Function Documentation</h2>
<a id="ade4e14ec9251183d70c7362e3c8ec349"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ade4e14ec9251183d70c7362e3c8ec349">&#9670;&nbsp;</a></span>closeConnection()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void doip::IConnectionContext::closeConnection </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedoip.html#aa0c74d05995bcd88c8382796bafebd15">DoIPCloseReason</a>&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Close the TCP connection. </p>
<p>This is called by the state machine when the connection should be closed (timeout, invalid message, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td>Why the connection is being closed </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a0ad80b5f128d07f4b4d715c11c1756bc">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#a907765994a33af4106fff48be50dad71">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="ab7344d7737d83e694d887d363d8fce30"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7344d7737d83e694d887d363d8fce30">&#9670;&nbsp;</a></span>getClientAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedoip.html#a2e34faf5c14e3e2eb6669925065109f3">DoIPAddress</a> doip::IConnectionContext::getClientAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the currently active source address (routed client) </p>
<p>After routing activation, this returns the client's source address</p>
<dl class="section return"><dt>Returns</dt><dd>The active source address, or 0 if no routing is active </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a35c6c488b0c9f3b801a75b34cec19788">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#a1ce4c839c38c72c9bd886944c22437ab">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="a1c1d741b613ecad64d28a877019682a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1c1d741b613ecad64d28a877019682a2">&#9670;&nbsp;</a></span>getCloseReason()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedoip.html#aa0c74d05995bcd88c8382796bafebd15">DoIPCloseReason</a> doip::IConnectionContext::getCloseReason </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the reason why the connection was closed. </p>
<dl class="section return"><dt>Returns</dt><dd>The DoIPCloseReason for the closed connection </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a691648ed87688d90fdc87729068ed6e1">doip::DoIPDefaultConnection</a>.</p>

</div>
</div>
<a id="ac968c2daf59db7ab0c16460bada6c565"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac968c2daf59db7ab0c16460bada6c565">&#9670;&nbsp;</a></span>getServerAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedoip.html#a2e34faf5c14e3e2eb6669925065109f3">DoIPAddress</a> doip::IConnectionContext::getServerAddress </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the server's logical address. </p>
<p>Used by state machine for constructing response messages</p>
<dl class="section return"><dt>Returns</dt><dd>The server's DoIP logical address </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a1828d10f69f0c309057e755029e41b4f">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#afdb1c27ad436802bdfb82558d2a8943e">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="aaddc0db259c5ea7b44dd448449d74208"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaddc0db259c5ea7b44dd448449d74208">&#9670;&nbsp;</a></span>hasDownstreamHandler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool doip::IConnectionContext::hasDownstreamHandler </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if downstream forwarding is available. </p>
<p>This checks if the <a class="el" href="structdoip_1_1DoIPServerModel.html" title="DoIP Server Model - Configuration and callbacks for a DoIP server connection.">DoIPServerModel</a> has a downstream handler configured. The state machine uses this to decide whether to forward messages downstream or handle them locally.</p>
<dl class="section return"><dt>Returns</dt><dd>true if downstream forwarding is configured, false otherwise </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a9f70ef106137809ec9bb25b418be7fcb">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#a1c9596cd06c29e8c03decc7bff550e2c">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="a7d6e8daed31b8bdfacdb6c4684633071"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7d6e8daed31b8bdfacdb6c4684633071">&#9670;&nbsp;</a></span>isOpen()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual bool doip::IConnectionContext::isOpen </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Check if the connection is currently open. </p>
<dl class="section return"><dt>Returns</dt><dd>true if the connection is open, false otherwise </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a4206b29de8ad7eeeb5fee1a1e3e2e6bd">doip::DoIPDefaultConnection</a>.</p>

</div>
</div>
<a id="a240922118e46d9e58b19315f90cd71f3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a240922118e46d9e58b19315f90cd71f3">&#9670;&nbsp;</a></span>notifyConnectionClosed()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void doip::IConnectionContext::notifyConnectionClosed </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedoip.html#aa0c74d05995bcd88c8382796bafebd15">DoIPCloseReason</a>&#160;</td>
          <td class="paramname"><em>reason</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notify application that connection is closing. </p>
<p>This allows the application to perform cleanup when the connection is closed (by timeout, error, or graceful shutdown)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">reason</td><td>Why the connection is closing </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a9a28b04c5a5dfa2a9c382354bae5bb42">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#ad0d30fe5d40a2e3a1b14f339c5b2bb0c">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="a2f893190fe2b9ab5b15c58010b8a820c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f893190fe2b9ab5b15c58010b8a820c">&#9670;&nbsp;</a></span>notifyDiagnosticAckSent()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void doip::IConnectionContext::notifyDiagnosticAckSent </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="namespacedoip.html#a36d50a403a0f7ea02d29c3ca55ccf575">DoIPDiagnosticAck</a>&#160;</td>
          <td class="paramname"><em>ack</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Notify application that diagnostic ACK/NACK was sent. </p>
<p>Optional notification after sending diagnostic message acknowledgement</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ack</td><td>The ACK/NACK that was sent (nullopt = positive ACK) </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a48ca9dbd70bedabd92b31f8755c861e5">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#a7bdd772128333a3608a04d1767c5d36f">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="a53fb1e96803eaef9e20424aa4a713667"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53fb1e96803eaef9e20424aa4a713667">&#9670;&nbsp;</a></span>notifyDiagnosticMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedoip.html#a36d50a403a0f7ea02d29c3ca55ccf575">DoIPDiagnosticAck</a> doip::IConnectionContext::notifyDiagnosticMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdoip_1_1DoIPMessage.html">DoIPMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle an incoming diagnostic message (application callback) </p>
<p>This forwards the diagnostic message to the application layer for processing. The application returns either:</p><ul>
<li>std::nullopt: Send positive ACK</li>
<li>DoIPNegativeDiagnosticAck value: Send negative ACK with this code</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The diagnostic message received </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>std::nullopt for ACK, or NACK code </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a9653062781c2a232ac82067a6008f962">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#a6e184b5bb5e0be398e1e711b90c60a80">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="a1cbc12ac44ae797098faccb893341f7d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1cbc12ac44ae797098faccb893341f7d">&#9670;&nbsp;</a></span>notifyDownstreamRequest()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual <a class="el" href="namespacedoip.html#a970f4c66d23bd2e149294ebbf34016c9">DoIPDownstreamResult</a> doip::IConnectionContext::notifyDownstreamRequest </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdoip_1_1DoIPMessage.html">DoIPMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Forward a diagnostic message to downstream (subnet device) </p>
<p>Called by the state machine when a diagnostic message should be routed to a downstream device (e.g., ECU on CAN bus). The implementation delegates to <a class="el" href="structdoip_1_1DoIPServerModel.html#a68c0152ce5742fe6b881e0ac4338870c" title="Called when a diagnostic message should be forwarded downstream.">DoIPServerModel::onDownstreamRequest</a>.</p>
<p>The downstream handler is responsible for:</p><ol type="1">
<li>Sending the message via the appropriate transport (CAN, LIN, etc.)</li>
<li>Storing the connection context for async response delivery</li>
<li>Calling <a class="el" href="classdoip_1_1IConnectionContext.html#ab54b0cfc68440c9e9f120ef492f037dc" title="Receive a response from downstream device.">receiveDownstreamResponse()</a> when the response arrives</li>
</ol>
<p>The state machine handles:</p><ul>
<li>Transition to WaitDownstreamResponse state</li>
<li>Starting the downstream response timeout timer</li>
<li>Processing the response when it arrives</li>
</ul>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The diagnostic message to forward </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Result indicating if the request was initiated successfully </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a3f1f686bf9ca258d4b51b2f43b9ac864">doip::DoIPDefaultConnection</a>.</p>

</div>
</div>
<a id="ab54b0cfc68440c9e9f120ef492f037dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab54b0cfc68440c9e9f120ef492f037dc">&#9670;&nbsp;</a></span>receiveDownstreamResponse()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void doip::IConnectionContext::receiveDownstreamResponse </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="structdoip_1_1ByteArray.html">ByteArray</a> &amp;&#160;</td>
          <td class="paramname"><em>response</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="namespacedoip.html#a970f4c66d23bd2e149294ebbf34016c9">DoIPDownstreamResult</a>&#160;</td>
          <td class="paramname"><em>result</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Receive a response from downstream device. </p>
<p>Called by the application layer when a response is received from a downstream device. This injects the response back into the state machine for processing.</p>
<p>Thread-safety: This method may be called from a different thread than the one running the state machine. Implementations should ensure thread-safe access to the state machine.</p>
<p>Typical call sequence:</p><ol type="1">
<li>State machine calls notifyDownstreamRequest(request)</li>
<li>Application sends request via CAN/LIN/etc.</li>
<li>Application receives response from downstream</li>
<li>Application calls receiveDownstreamResponse(response)</li>
<li>State machine processes response and sends to client</li>
</ol>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">response</td><td>The diagnostic response from downstream </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a1c39150d069ed92893f32f991ef85cdf">doip::DoIPDefaultConnection</a>.</p>

</div>
</div>
<a id="a6fb4ea5ca10fe941e7e0cf49e9c1d9dd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fb4ea5ca10fe941e7e0cf49e9c1d9dd">&#9670;&nbsp;</a></span>sendProtocolMessage()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual ssize_t doip::IConnectionContext::sendProtocolMessage </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="classdoip_1_1DoIPMessage.html">DoIPMessage</a> &amp;&#160;</td>
          <td class="paramname"><em>msg</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Send a DoIP protocol message to the client. </p>
<p>This is called by the state machine when it needs to send a protocol message (ACK, NACK, alive check, routing activation response, etc.)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">msg</td><td>The DoIP message to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Number of bytes sent, or negative value on error </dd></dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPDefaultConnection.html#a6cae953bb6846bc45745567b452333c0">doip::DoIPDefaultConnection</a>, and <a class="el" href="classdoip_1_1DoIPConnection.html#a7f67a97163e3f8a59fe0a87f1f1e169e">doip::DoIPConnection</a>.</p>

</div>
</div>
<a id="a5628ab1a792b4849e43148eeab329f13"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5628ab1a792b4849e43148eeab329f13">&#9670;&nbsp;</a></span>setClientAddress()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">virtual void doip::IConnectionContext::setClientAddress </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="namespacedoip.html#a2e34faf5c14e3e2eb6669925065109f3">DoIPAddress</a> &amp;&#160;</td>
          <td class="paramname"><em>address</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">pure virtual</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Set the active source address after routing activation. </p>
<p>Called by state machine when routing activation is successful</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">address</td><td>The client's source address </td></tr>
  </table>
  </dd>
</dl>

<p>Implemented in <a class="el" href="classdoip_1_1DoIPConnection.html#a8a12d8e7dffed95ccecac7f434b0fc1e">doip::DoIPConnection</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>inc/<a class="el" href="IConnectionContext_8h_source.html">IConnectionContext.h</a></li>
</ul>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="namespacedoip.html">doip</a></li><li class="navelem"><a class="el" href="classdoip_1_1IConnectionContext.html">IConnectionContext</a></li>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
